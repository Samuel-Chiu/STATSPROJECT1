---
title: "Data Scraping with rvest"
author: "Math 271"
date: "Spring 22"
output:
  html_document:
    css: lab.css
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(magrittr)
library(rvest)

library(lubridate)
```


```{r}
raw_html <- read_html("https://waterdata.usgs.gov/or/nwis/current/?type=dailydischarge&group_key=county_cd")

```



```{r}

url <- "https://waterdata.usgs.gov/or/nwis/current/?type=dailydischarge&group_key=county_cd"

# Read the HTML content of the webpage
webpage <- read_html(url)

# Use html_nodes to select the table based on HTML tags
table <- html_nodes(webpage, "table")

# Convert the table to a data frame
table_df <- html_table(table)[[2]]


```


```{r}

# Remove characters from numerical data
clean_column <- function(x) {
  # Use gsub to remove non-numeric characters
  x <- gsub("[^0-9.-]", "", x)
  # Convert cleaned values to numeric
  x <- as.numeric(x)
  return(x)
}

df_cleaned <- table_df %>% 
  as.data.frame(lapply(table_df, clean_column))

df_cleaned <- table_df[table_df$StationNumber <= "chr"]

```
df_cleaned <- na.omit(df_cleaned)
```

```{r}

remove_names <- table_df %>% 
  select(-"Station name")

```


```{r}
ggplot(datea = remove_names, aes(x = "Dailymeanstream- flow (ft3/s)2/5")) +
  

```





